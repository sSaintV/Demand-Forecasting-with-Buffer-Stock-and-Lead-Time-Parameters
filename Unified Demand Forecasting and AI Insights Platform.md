# Unified Demand Forecasting and AI Insights Platform

This application integrates machine learning-powered demand forecasting with AI-driven insights, providing a comprehensive platform for analyzing historical data, predicting future demand, and generating actionable business intelligence.

## Features

- **ML Forecasting**: Utilizes Linear Regression and Random Forest Regressor models for accurate time series forecasting.
- **Streamlit UI**: Interactive dashboard for data upload, parameter configuration, and visualization of historical and forecasted demand.
- **AI Insights (Ollama Integration)**: Leverages Ollama to generate textual insights and a summarized forecast table based on the ML forecast results.
- **Interactive Chat**: Engage with the AI model (Llama 3 by default) to ask questions about forecasts and insights directly within the application.
- **Supply Chain Optimization**: Adjust forecasts based on lead time and safety stock parameters.
- **Dynamic Filtering**: Analyze demand by various product attributes like product ID, manufacturer, brand, category, sub-category, and size.

## Architecture Overview

The unified application combines the functionalities of two previous Proof-of-Concepts (POCs):

- **POC_1 (Forecasting & UI)**: Provides the core ML forecasting models, data preprocessing, feature engineering, and the Streamlit-based user interface for data visualization and interaction.
- **POC_2 (AI Insights)**: Contributes the Ollama integration for generating AI insights and the interactive chat functionality.

### Integration Points:

1.  **Unified Streamlit Interface**: A single `unified_app.py` file orchestrates the entire application, merging the UI elements from both POCs into a cohesive experience.
2.  **Forecast Data to Ollama**: The `adjusted_forecast` data generated by the ML models in `unified_app.py` is passed as context to the Ollama model for AI insights generation. This ensures that the AI's analysis is directly informed by the latest demand predictions.
3.  **AI Insights Display**: The textual insights and summarized forecast table returned by Ollama are displayed alongside the ML forecasting charts in the Streamlit UI, providing a holistic view of demand and its implications.
4.  **Modular Codebase**: Helper functions related to Ollama interaction are refactored into a separate `ollama_utils.py` file to maintain code organization and readability.

## Setup and Installation

To run this application, you need to have Python 3.8+ and Ollama installed on your system.

### 1. Install Ollama

Follow the instructions on the [Ollama website](https://ollama.ai/download) to download and install Ollama for your operating system. After installation, pull the `llama3` model (or your preferred model):

```bash
ollama pull llama3
```

### 2. Clone the Repository

(Assuming this project is in a Git repository. If not, just ensure you have the `unified_app.py` and `ollama_utils.py` files.)

```bash
git clone <repository_url>
cd <repository_directory>
```

### 3. Install Python Dependencies

It is recommended to use a virtual environment:

```bash
python3 -m venv venv
source venv/bin/activate  # On Windows: .\venv\Scripts\activate
pip install -r requirements.txt
```

Create a `requirements.txt` file with the following content:

```
streamlit
pandas
numpy
plotly
scikit-learn
ollama
```

### 4. Run the Application

```bash
streamlit run unified_app.py
```

This will open the Streamlit application in your web browser.

## Usage

1.  **Upload Data**: Upload your historical demand data in CSV format. Ensure it contains `WEEK`, `UNITS`, and `SALES` columns.
2.  **Configure Forecast**: Select your preferred ML model (Random Forest or Linear Regression), target variable (UNITS or INVENTORY), and forecast horizon.
3.  **Apply Filters**: Use the sidebar filters to narrow down your analysis by product attributes.
4.  **Generate Forecasts**: The application will automatically generate ML forecasts and display interactive charts.
5.  **Generate AI Insights**: Click the "Generate AI Insights with Ollama" button to get textual analysis and a summarized forecast table from the AI.
6.  **Chat with AI**: Use the chat interface to ask follow-up questions about the forecasts or insights.

## Future Enhancements

-   **More ML Models**: Integrate advanced time series models like ARIMA, Prophet, or XGBoost.
-   **Advanced Supply Chain Optimization**: Add features for inventory optimization, reorder points, and safety stock calculations based on demand variability.
-   **Multi-Product Forecasting**: Enhance AI insights to provide aggregated analysis for multiple products simultaneously.
-   **Deployment Options**: Provide options for deploying the application to cloud platforms for broader accessibility.

---

**Author**: Manus AI
**Date**: July 21, 2025


